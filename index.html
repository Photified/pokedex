<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Who's That Pok√©mon? - Enhanced Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
body { 
  margin: 0; 
  padding: 0; 
  font-family: 'Arial', sans-serif; 
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #000; 
  text-align: center; 
  min-height: 100vh;
  overflow-x: hidden;
}

/* Loading screen */
#loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #1a1a2e;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  transition: opacity 0.5s ease-out;
}

.pokeball-loader {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(to bottom, #ff6b6b 50%, white 50%);
  border: 3px solid #333;
  position: relative;
  animation: spin 1s linear infinite;
}

.pokeball-loader::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: white;
  border: 3px solid #333;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Header with stats */
#game-header {
  background: rgba(0,0,0,0.8);
  color: white;
  padding: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255,255,255,0.1);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  backdrop-filter: blur(10px);
}

.streak-counter {
  background: linear-gradient(45deg, #ff6b6b, #feca57);
  color: white;
  font-weight: bold;
}

#rocket-event { 
  margin: 1rem auto; 
  max-width: 1280px; 
  padding: 1rem; 
  border: 2px solid #ff6b6b; 
  background: linear-gradient(45deg, #333, #555); 
  color: #fff; 
  display: none; 
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  animation: rocketAppear 0.5s ease-out;
}

@keyframes rocketAppear {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.pokedex-screen {
  position: relative;
  width: min(1280px, 95vw);
  padding-top: 40px;
  height: 70vh;
  margin: 1rem auto;
  border: none;
  outline: none;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  border-radius: 20px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.3);
  transition: all 0.3s ease;
}

.silhouette-bg { background-image: url('pokedex_bg_silhouette.png'); }
.quiz-bg { background-image: url('pokedex_bg_blue.png'); }

.display-area { 
  position: absolute; 
  top: 22%; 
  left: 17%; 
  width: 40%; 
  height: 60%; 
  transition: all 0.3s ease;
}

.display-area img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  transform: translate(20px, 55px) scale(0.75);
  transform-origin: top left;
  transition: all 0.3s ease;
  filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
}

.question-area {
  position: absolute;
  top: 22%;
  left: 70%;
  width: 15%;
  height: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 0.5rem;
  box-sizing: border-box;
  font-size: 0.6rem;
  font-weight: bold;
  color: #fff;
  transform: translate(-48px, 85px);
  white-space: normal;
  line-height: 1.2rem;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
}

.answers-area {
  position: absolute;
  top: 67%;
  left: 60%;
  width: 36%;
  height: 24%;
  display: flex;
  flex-wrap: wrap;
  gap: 4% 4%;
  transform: translate(-40px, 20px);
}

.answers-area button {
  width: 48%;
  height: 45%;
  border: none;
  border-radius: 8px;
  background: none; /* Remove gradient background */
  color: #fff;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: none; /* Remove shadow */
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.answers-area button:hover {
  transform: translateY(-2px);
  box-shadow: none;
  background: none;
}

.answers-area button:active {
  transform: translateY(0);
}

/* Position adjustments for individual answers */
.answers-area button:nth-child(1) { transform: translate(8px, 0); }
.answers-area button:nth-child(2) { transform: translate(-50px, 0); }
.answers-area button:nth-child(3) { transform: translate(8px, -20px); }
.answers-area button:nth-child(4) { transform: translate(-50px, -20px); }

#stats-area {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 50%;
  padding: 0.5rem;
  box-sizing: border-box;
  color: #000;
  font-size: 0.7rem;
  line-height: 1.1;
  transform: translate(90px, 0); 
  background: rgba(255, 255, 255, 0.9);
  border-radius: 10px; 
  display: none;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

#back-button {
  position: absolute;
  top: 67%;
  left: 60%;
  width: 48%;
  height: 45%;
  transform: translate(-32px, 20px);
  background: linear-gradient(145deg, #ff6b6b, #ee5a52);
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: bold;
  cursor: pointer;
  display: none;
  transition: all 0.2s ease;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

#back-button:hover {
  transform: translate(-32px, 18px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

#pokedex-grid {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  margin: 0 auto;
  padding: 1rem;
  max-width: 1280px;
  box-sizing: border-box;
  gap: 0.5rem;
}

.pokemon-card {
  flex: 0 0 auto;
  width: 100px;
  text-align: center;
  background: rgba(255,255,255,0.9);
  border-radius: 15px;
  padding: 0.5rem;
  transition: all 0.3s ease;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.pokemon-card:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}

.pokemon-card img { 
  width: 80px; 
  height: 80px; 
  object-fit: contain; 
  display: block; 
  margin: 0 auto 0.25rem; 
  transition: all 0.3s ease;
}

.pokemon-card .label { 
  font-size: 0.7rem; 
  line-height: 1.2; 
  color: #333; 
  font-weight: bold;
}

.shiny-card {
  background: linear-gradient(145deg, #ffd700, #ffed4e);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0%, 100% { box-shadow: 0 4px 15px rgba(255,215,0,0.3); }
  50% { box-shadow: 0 8px 30px rgba(255,215,0,0.6); }
}

/* Particle effects */
.particles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

.particle {
  position: absolute;
  width: 10px;
  height: 10px;
  background: #ffd700;
  border-radius: 50%;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
  100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
}

/* Achievement popup */
.achievement-popup {
  position: fixed;
  top: 20px;
  right: 20px;
  background: linear-gradient(145deg, #4ecdc4, #44a08d);
  color: white;
  padding: 1rem;
  border-radius: 10px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  transform: translateX(400px);
  transition: transform 0.5s ease;
  z-index: 100;
  max-width: 300px;
}

.achievement-popup.show {
  transform: translateX(0);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .pokedex-screen {
    width: 95vw;
    height: 60vh;
  }
  
  #game-header {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .stat-item {
    font-size: 0.8rem;
    padding: 0.3rem 0.6rem;
  }
  
  .question-area {
    font-size: 0.5rem;
    width: 20%;
  }
  
  .answers-area button {
  width: 48%;
  height: 45%;
  border: none;
  border-radius: 8px;
  background: none; /* Remove gradient background */
  color: #fff;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: none; /* Remove shadow */
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}
  
  .pokemon-card {
    width: 80px;
  }
  
  .pokemon-card img {
    width: 60px;
    height: 60px;
  }
}

/* Fade transitions */
.fade-out {
  opacity: 0;
  transition: opacity 0.3s ease;
}

.fade-in {
  opacity: 1;
  transition: opacity 0.3s ease;
}

/* Daily challenge indicator */
.daily-challenge {
  background: linear-gradient(45deg, #ff9a9e, #fecfef);
  border: 2px solid #ff6b9d;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="pokeball-loader"></div>
    <p style="color: white; margin-top: 20px;">Loading Pok√©dex...</p>
  </div>

  <!-- Game Header -->
  <div id="game-header">
    <div class="stat-item">
      <span>Pokedex</span>
      <span id="pokedex-counter">0 / 151</span>
    </div>
    <div class="stat-item" id="achievement-counter-item">
      <span>üèÖ</span>
      <span id="achievement-counter">Achievements: 0</span>
    </div>
    <div class="stat-item streak-counter">
      <span>üî•</span>
      <span id="streak-counter">Streak: 0</span>
    </div>
    <div class="stat-item">
      <span>‚≠ê</span>
      <span id="shiny-counter">Shinies: 0</span>
    </div>
    <div class="stat-item" id="daily-challenge-indicator" style="display: none;">
      <span>üìÖ</span>
      <span>Daily Challenge!</span>
    </div>
  </div>

  <!-- Team Rocket Event -->
  <div id="rocket-event">
    <h2>Team&nbsp;Rocket Encounter!</h2>
    <img src="sprites/pokemon_000.png" alt="Team Rocket"
         style="width:75px;height:auto;transform: translate(25px, 0);" />
    <p id="rocket-message"></p>
    <div class="particles" id="rocket-particles"></div>
  </div>

  <!-- Main Game Screen -->
  <div id="round-screen" class="pokedex-screen silhouette-bg">
    <div class="display-area">
      <img id="silhouette" src="" alt="Silhouette" />
      <div id="stats-area" style="display:none;"></div>
    </div>
    <div class="question-area" id="question-area"></div>
    <div class="answers-area" id="answers-area"></div>
    <button id="back-button" class="back-btn" style="display:none;">Back</button>
    <div class="particles" id="game-particles"></div>
  </div>

  <!-- Hidden Pok√©dex Title for JS compatibility -->
<h2 style="display:none;"><span id="pokedex-counter-title">(0 / 151)</span></h2>

  <!-- Pok√©dex Grid -->
  <div id="pokedex-grid"></div>

  <!-- Achievement Popup -->
  <div id="achievement-popup" class="achievement-popup">
    <h3 style="margin: 0 0 0.5rem 0;">üèÜ Achievement Unlocked!</h3>
    <p id="achievement-text" style="margin: 0;"></p>
  </div>

  <!-- Pok√©mon Data -->
  <script id="pokedex-data" type="application/json">
[
  {
    "id": 1,
    "name": "bulbasaur",
    "height": "0.7 m",
    "weight": "6.9 kg",
    "ability": "Overgrow",
    "move": "Vine Whip",
    "egg_group": "Monster, Plant"
  },
  {
    "id": 2,
    "name": "ivysaur",
    "height": "1.0 m",
    "weight": "13.0 kg",
    "ability": "Overgrow",
    "move": "Razor Leaf",
    "egg_group": "Monster, Plant"
  },
  {
    "id": 3,
    "name": "venusaur",
    "height": "2.0 m",
    "weight": "100.0 kg",
    "ability": "Overgrow",
    "move": "Solar Beam",
    "egg_group": "Monster, Plant"
  },
  {
    "id": 4,
    "name": "charmander",
    "height": "0.6 m",
    "weight": "8.5 kg",
    "ability": "Blaze",
    "move": "Ember",
    "egg_group": "Dragon, Monster"
  },
  {
    "id": 5,
    "name": "charmeleon",
    "height": "1.1 m",
    "weight": "19.0 kg",
    "ability": "Blaze",
    "move": "Flamethrower",
    "egg_group": "Dragon, Monster"
  },
  {
    "id": 6,
    "name": "charizard",
    "height": "1.7 m",
    "weight": "90.5 kg",
    "ability": "Blaze",
    "move": "Fire Blast",
    "egg_group": "Dragon, Monster"
  },
  {
    "id": 7,
    "name": "squirtle",
    "height": "0.5 m",
    "weight": "9.0 kg",
    "ability": "Torrent",
    "move": "Water Gun",
    "egg_group": "Monster, Water 1"
  },
  {
    "id": 8,
    "name": "wartortle",
    "height": "1.0 m",
    "weight": "22.5 kg",
    "ability": "Torrent",
    "move": "Bubble Beam",
    "egg_group": "Monster, Water 1"
  },
  {
    "id": 9,
    "name": "blastoise",
    "height": "1.6 m",
    "weight": "85.5 kg",
    "ability": "Torrent",
    "move": "Hydro Pump",
    "egg_group": "Monster, Water 1"
  },
  {
    "id": 10,
    "name": "caterpie",
    "height": "0.3 m",
    "weight": "2.9 kg",
    "ability": "Shield Dust",
    "move": "Tackle",
    "egg_group": "Bug"
  },
  {
    "id": 11,
    "name": "metapod",
    "height": "0.7 m",
    "weight": "9.9 kg",
    "ability": "Shed Skin",
    "move": "Harden",
    "egg_group": "Bug"
  },
  {
    "id": 12,
    "name": "butterfree",
    "height": "1.1 m",
    "weight": "32.0 kg",
    "ability": "Compound Eyes",
    "move": "Psychic",
    "egg_group": "Bug"
  },
  {
    "id": 13,
    "name": "weedle",
    "height": "0.3 m",
    "weight": "3.2 kg",
    "ability": "Shield Dust",
    "move": "Poison Sting",
    "egg_group": "Bug"
  },
  {
    "id": 14,
    "name": "kakuna",
    "height": "0.6 m",
    "weight": "10.0 kg",
    "ability": "Shed Skin",
    "move": "Harden",
    "egg_group": "Bug"
  },
  {
    "id": 15,
    "name": "beedrill",
    "height": "1.0 m",
    "weight": "29.5 kg",
    "ability": "Swarm",
    "move": "Twineedle",
    "egg_group": "Bug"
  },
  {
    "id": 16,
    "name": "pidgey",
    "height": "0.3 m",
    "weight": "1.8 kg",
    "ability": "Keen Eye",
    "move": "Gust",
    "egg_group": "Flying"
  },
  {
    "id": 17,
    "name": "pidgeotto",
    "height": "1.1 m",
    "weight": "30.0 kg",
    "ability": "Keen Eye",
    "move": "Wing Attack",
    "egg_group": "Flying"
  },
  {
    "id": 18,
    "name": "pidgeot",
    "height": "1.5 m",
    "weight": "39.5 kg",
    "ability": "Keen Eye",
    "move": "Hurricane",
    "egg_group": "Flying"
  },
  {
    "id": 19,
    "name": "rattata",
    "height": "0.3 m",
    "weight": "3.5 kg",
    "ability": "Run Away",
    "move": "Quick Attack",
    "egg_group": "Ground"
  },
  {
    "id": 20,
    "name": "raticate",
    "height": "0.7 m",
    "weight": "18.5 kg",
    "ability": "Run Away",
    "move": "Hyper Fang",
    "egg_group": "Ground"
  },
  {
    "id": 21,
    "name": "spearow",
    "height": "0.3 m",
    "weight": "2.0 kg",
    "ability": "Keen Eye",
    "move": "Peck",
    "egg_group": "Flying"
  },
  {
    "id": 22,
    "name": "fearow",
    "height": "1.2 m",
    "weight": "38.0 kg",
    "ability": "Keen Eye",
    "move": "Drill Peck",
    "egg_group": "Flying"
  },
  {
    "id": 23,
    "name": "ekans",
    "height": "2.0 m",
    "weight": "6.9 kg",
    "ability": "Intimidate",
    "move": "Poison Sting",
    "egg_group": "Dragon, Ground"
  },
  {
    "id": 24,
    "name": "arbok",
    "height": "3.5 m",
    "weight": "65.0 kg",
    "ability": "Intimidate",
    "move": "Acid",
    "egg_group": "Dragon, Ground"
  },
  {
    "id": 25,
    "name": "pikachu",
    "height": "0.4 m",
    "weight": "6.0 kg",
    "ability": "Static",
    "move": "Thunder Shock",
    "egg_group": "Fairy, Ground"
  },
  {
    "id": 26,
    "name": "raichu",
    "height": "0.8 m",
    "weight": "30.0 kg",
    "ability": "Static",
    "move": "Thunder",
    "egg_group": "Fairy, Ground"
  },
  {
    "id": 27,
    "name": "sandshrew",
    "height": "0.6 m",
    "weight": "12.0 kg",
    "ability": "Sand Veil",
    "move": "Scratch",
    "egg_group": "Ground"
  },
  {
    "id": 28,
    "name": "sandslash",
    "height": "1.0 m",
    "weight": "29.5 kg",
    "ability": "Sand Veil",
    "move": "Slash",
    "egg_group": "Ground"
  },
  {
    "id": 29,
    "name": "nidoran-f",
    "height": "0.4 m",
    "weight": "7.0 kg",
    "ability": "Poison Point",
    "move": "Poison Sting",
    "egg_group": "Ground, Monster"
  },
  {
    "id": 30,
    "name": "nidorina",
    "height": "0.8 m",
    "weight": "20.0 kg",
    "ability": "Poison Point",
    "move": "Double Kick",
    "egg_group": "No Eggs"
  },
  {
    "id": 31,
    "name": "nidoqueen",
    "height": "1.3 m",
    "weight": "60.0 kg",
    "ability": "Poison Point",
    "move": "Earthquake",
    "egg_group": "No Eggs"
  },
  {
    "id": 32,
    "name": "nidoran-m",
    "height": "0.5 m",
    "weight": "9.0 kg",
    "ability": "Poison Point",
    "move": "Poison Sting",
    "egg_group": "Ground, Monster"
  },
  {
    "id": 33,
    "name": "nidorino",
    "height": "0.9 m",
    "weight": "19.5 kg",
    "ability": "Poison Point",
    "move": "Horn Attack",
    "egg_group": "Ground, Monster"
  },
  {
    "id": 34,
    "name": "nidoking",
    "height": "1.4 m",
    "weight": "62.0 kg",
    "ability": "Poison Point",
    "move": "Megahorn",
    "egg_group": "Ground, Monster"
  },
  {
    "id": 35,
    "name": "clefairy",
    "height": "0.6 m",
    "weight": "7.5 kg",
    "ability": "Cute Charm",
    "move": "Metronome",
    "egg_group": "Fairy"
  },
  {
    "id": 36,
    "name": "clefable",
    "height": "1.3 m",
    "weight": "40.0 kg",
    "ability": "Cute Charm",
    "move": "Moonblast",
    "egg_group": "Fairy"
  },
  {
    "id": 37,
    "name": "vulpix",
    "height": "0.6 m",
    "weight": "9.9 kg",
    "ability": "Flash Fire",
    "move": "Ember",
    "egg_group": "Ground"
  },
  {
    "id": 38,
    "name": "ninetales",
    "height": "1.1 m",
    "weight": "19.9 kg",
    "ability": "Flash Fire",
    "move": "Fire Blast",
    "egg_group": "Ground"
  },
  {
    "id": 39,
    "name": "jigglypuff",
    "height": "0.5 m",
    "weight": "5.5 kg",
    "ability": "Cute Charm",
    "move": "Sing",
    "egg_group": "Fairy"
  },
  {
    "id": 40,
    "name": "wigglytuff",
    "height": "1.0 m",
    "weight": "12.0 kg",
    "ability": "Cute Charm",
    "move": "Hyper Voice",
    "egg_group": "Fairy"
  },
  {
    "id": 41,
    "name": "zubat",
    "height": "0.8 m",
    "weight": "7.5 kg",
    "ability": "Inner Focus",
    "move": "Leech Life",
    "egg_group": "Flying"
  },
  {
    "id": 42,
    "name": "golbat",
    "height": "1.6 m",
    "weight": "55.0 kg",
    "ability": "Inner Focus",
    "move": "Air Slash",
    "egg_group": "Flying"
  },
  {
    "id": 43,
    "name": "oddish",
    "height": "0.5 m",
    "weight": "5.4 kg",
    "ability": "Chlorophyll",
    "move": "Absorb",
    "egg_group": "Plant"
  },
  {
    "id": 44,
    "name": "gloom",
    "height": "0.8 m",
    "weight": "8.6 kg",
    "ability": "Chlorophyll",
    "move": "Sleep Powder",
    "egg_group": "Plant"
  },
  {
    "id": 45,
    "name": "vileplume",
    "height": "1.2 m",
    "weight": "18.6 kg",
    "ability": "Chlorophyll",
    "move": "Petal Dance",
    "egg_group": "Plant"
  },
  {
    "id": 46,
    "name": "paras",
    "height": "0.3 m",
    "weight": "5.4 kg",
    "ability": "Effect Spore",
    "move": "Scratch",
    "egg_group": "Bug, Plant"
  },
  {
    "id": 47,
    "name": "parasect",
    "height": "1.0 m",
    "weight": "29.5 kg",
    "ability": "Effect Spore",
    "move": "Spore",
    "egg_group": "Bug, Plant"
  },
  {
    "id": 48,
    "name": "venonat",
    "height": "1.0 m",
    "weight": "30.0 kg",
    "ability": "Compound Eyes",
    "move": "Confusion",
    "egg_group": "Bug"
  },
  {
    "id": 49,
    "name": "venomoth",
    "height": "1.5 m",
    "weight": "12.5 kg",
    "ability": "Shield Dust",
    "move": "Psychic",
    "egg_group": "Bug"
  },
  {
    "id": 50,
    "name": "diglett",
    "height": "0.2 m",
    "weight": "0.8 kg",
    "ability": "Sand Veil",
    "move": "Dig",
    "egg_group": "Ground"
  },
  {
    "id": 51,
    "name": "dugtrio",
    "height": "0.7 m",
    "weight": "33.3 kg",
    "ability": "Sand Veil",
    "move": "Earthquake",
    "egg_group": "Ground"
  },
  {
    "id": 52,
    "name": "meowth",
    "height": "0.4 m",
    "weight": "4.2 kg",
    "ability": "Pickup",
    "move": "Pay Day",
    "egg_group": "Ground"
  },
  {
    "id": 53,
    "name": "persian",
    "height": "1.0 m",
    "weight": "32.0 kg",
    "ability": "Limber",
    "move": "Slash",
    "egg_group": "Ground"
  },
  {
    "id": 54,
    "name": "psyduck",
    "height": "0.8 m",
    "weight": "19.6 kg",
    "ability": "Damp",
    "move": "Water Gun",
    "egg_group": "Ground, Water 1"
  },
  {
    "id": 55,
    "name": "golduck",
    "height": "1.7 m",
    "weight": "76.6 kg",
    "ability": "Damp",
    "move": "Psychic",
    "egg_group": "Ground, Water 1"
  },
  {
    "id": 56,
    "name": "mankey",
    "height": "0.5 m",
    "weight": "28.0 kg",
    "ability": "Vital Spirit",
    "move": "Scratch",
    "egg_group": "Ground"
  },
  {
    "id": 57,
    "name": "primeape",
    "height": "1.0 m",
    "weight": "32.0 kg",
    "ability": "Vital Spirit",
    "move": "Cross Chop",
    "egg_group": "Ground"
  },
  {
    "id": 58,
    "name": "growlithe",
    "height": "0.7 m",
    "weight": "19.0 kg",
    "ability": "Intimidate",
    "move": "Flame Wheel",
    "egg_group": "Ground"
  },
  {
    "id": 59,
    "name": "arcanine",
    "height": "1.9 m",
    "weight": "155.0 kg",
    "ability": "Intimidate",
    "move": "Flamethrower",
    "egg_group": "Ground"
  },
  {
    "id": 60,
    "name": "poliwag",
    "height": "0.6 m",
    "weight": "12.4 kg",
    "ability": "Water Absorb",
    "move": "Water Gun",
    "egg_group": "Water 1"
  },
  {
    "id": 61,
    "name": "poliwhirl",
    "height": "1.0 m",
    "weight": "20.0 kg",
    "ability": "Water Absorb",
    "move": "Body Slam",
    "egg_group": "Water 1"
  },
  {
    "id": 62,
    "name": "poliwrath",
    "height": "1.3 m",
    "weight": "54.0 kg",
    "ability": "Water Absorb",
    "move": "Dynamic Punch",
    "egg_group": "Water 1"
  },
  {
    "id": 63,
    "name": "abra",
    "height": "0.9 m",
    "weight": "19.5 kg",
    "ability": "Synchronize",
    "move": "Teleport",
    "egg_group": "Human-Like"
  },
  {
    "id": 64,
    "name": "kadabra",
    "height": "1.3 m",
    "weight": "56.5 kg",
    "ability": "Synchronize",
    "move": "Confusion",
    "egg_group": "Human-Like"
  },
  {
    "id": 65,
    "name": "alakazam",
    "height": "1.5 m",
    "weight": "48.0 kg",
    "ability": "Synchronize",
    "move": "Psychic",
    "egg_group": "Human-Like"
  },
  {
    "id": 66,
    "name": "machop",
    "height": "0.8 m",
    "weight": "19.5 kg",
    "ability": "Guts",
    "move": "Karate Chop",
    "egg_group": "Human-Like"
  },
  {
    "id": 67,
    "name": "machoke",
    "height": "1.5 m",
    "weight": "70.5 kg",
    "ability": "Guts",
    "move": "Seismic Toss",
    "egg_group": "Human-Like"
  },
  {
    "id": 68,
    "name": "machamp",
    "height": "1.6 m",
    "weight": "130.0 kg",
    "ability": "Guts",
    "move": "Dynamic Punch",
    "egg_group": "Human-Like"
  },
  {
    "id": 69,
    "name": "bellsprout",
    "height": "0.7 m",
    "weight": "4.0 kg",
    "ability": "Chlorophyll",
    "move": "Vine Whip",
    "egg_group": "Plant"
  },
  {
    "id": 70,
    "name": "weepinbell",
    "height": "1.0 m",
    "weight": "6.4 kg",
    "ability": "Chlorophyll",
    "move": "Razor Leaf",
    "egg_group": "Plant"
  },
  {
    "id": 71,
    "name": "victreebel",
    "height": "1.7 m",
    "weight": "15.5 kg",
    "ability": "Chlorophyll",
    "move": "Leaf Blade",
    "egg_group": "Plant"
  },
  {
    "id": 72,
    "name": "tentacool",
    "height": "0.9 m",
    "weight": "45.5 kg",
    "ability": "Clear Body",
    "move": "Poison Sting",
    "egg_group": "Water 3"
  },
  {
    "id": 73,
    "name": "tentacruel",
    "height": "1.6 m",
    "weight": "55.0 kg",
    "ability": "Clear Body",
    "move": "Hydro Pump",
    "egg_group": "Water 3"
  },
  {
    "id": 74,
    "name": "geodude",
    "height": "0.4 m",
    "weight": "20.0 kg",
    "ability": "Rock Head",
    "move": "Rock Throw",
    "egg_group": "Mineral"
  },
  {
    "id": 75,
    "name": "graveler",
    "height": "1.0 m",
    "weight": "105.0 kg",
    "ability": "Rock Head",
    "move": "Rock Slide",
    "egg_group": "Mineral"
  },
  {
    "id": 76,
    "name": "golem",
    "height": "1.4 m",
    "weight": "300.0 kg",
    "ability": "Rock Head",
    "move": "Earthquake",
    "egg_group": "Mineral"
  },
  {
    "id": 77,
    "name": "ponyta",
    "height": "1.0 m",
    "weight": "30.0 kg",
    "ability": "Run Away",
    "move": "Flame Wheel",
    "egg_group": "Ground"
  },
  {
    "id": 78,
    "name": "rapidash",
    "height": "1.7 m",
    "weight": "95.0 kg",
    "ability": "Run Away",
    "move": "Fire Blast",
    "egg_group": "Ground"
  },
  {
    "id": 79,
    "name": "slowpoke",
    "height": "1.2 m",
    "weight": "36.0 kg",
    "ability": "Oblivious",
    "move": "Water Gun",
    "egg_group": "Monster, Water 1"
  },
  {
    "id": 80,
    "name": "slowbro",
    "height": "1.6 m",
    "weight": "78.5 kg",
    "ability": "Oblivious",
    "move": "Psychic",
    "egg_group": "Monster, Water 1"
  },
  {
    "id": 81,
    "name": "magnemite",
    "height": "0.3 m",
    "weight": "6.0 kg",
    "ability": "Magnet Pull",
    "move": "Thunder Shock",
    "egg_group": "Mineral"
  },
  {
    "id": 82,
    "name": "magneton",
    "height": "1.0 m",
    "weight": "60.0 kg",
    "ability": "Magnet Pull",
    "move": "Thunderbolt",
    "egg_group": "Mineral"
  },
  {
    "id": 83,
    "name": "farfetchd",
    "height": "0.8 m",
    "weight": "15.0 kg",
    "ability": "Keen Eye",
    "move": "Cut",
    "egg_group": "Flying, Ground"
  },
  {
    "id": 84,
    "name": "doduo",
    "height": "1.4 m",
    "weight": "39.2 kg",
    "ability": "Run Away",
    "move": "Peck",
    "egg_group": "Flying"
  },
  {
    "id": 85,
    "name": "dodrio",
    "height": "1.8 m",
    "weight": "85.2 kg",
    "ability": "Run Away",
    "move": "Drill Peck",
    "egg_group": "Flying"
  },
  {
    "id": 86,
    "name": "seel",
    "height": "1.1 m",
    "weight": "90.0 kg",
    "ability": "Thick Fat",
    "move": "Aurora Beam",
    "egg_group": "Ground, Water 1"
  },
  {
    "id": 87,
    "name": "dewgong",
    "height": "1.7 m",
    "weight": "120.0 kg",
    "ability": "Thick Fat",
    "move": "Ice Beam",
    "egg_group": "Ground, Water 1"
  },
  {
    "id": 88,
    "name": "grimer",
    "height": "0.9 m",
    "weight": "30.0 kg",
    "ability": "Stench",
    "move": "Sludge",
    "egg_group": "Amorphous"
  },
  {
    "id": 89,
    "name": "muk",
    "height": "1.2 m",
    "weight": "30.0 kg",
    "ability": "Stench",
    "move": "Sludge Bomb",
    "egg_group": "Amorphous"
  },
  {
    "id": 90,
    "name": "shellder",
    "height": "0.3 m",
    "weight": "4.0 kg",
    "ability": "Shell Armor",
    "move": "Clamp",
    "egg_group": "Water 3"
  },
  {
    "id": 91,
    "name": "cloyster",
    "height": "1.5 m",
    "weight": "132.5 kg",
    "ability": "Shell Armor",
    "move": "Spike Cannon",
    "egg_group": "Water 3"
  },
  {
    "id": 92,
    "name": "gastly",
    "height": "1.3 m",
    "weight": "0.1 kg",
    "ability": "Levitate",
    "move": "Lick",
    "egg_group": "Amorphous"
  },
  {
    "id": 93,
    "name": "haunter",
    "height": "1.6 m",
    "weight": "0.1 kg",
    "ability": "Levitate",
    "move": "Shadow Punch",
    "egg_group": "Amorphous"
  },
  {
    "id": 94,
    "name": "gengar",
    "height": "1.5 m",
    "weight": "40.5 kg",
    "ability": "Cursed Body",
    "move": "Shadow Ball",
    "egg_group": "Amorphous"
  },
  {
    "id": 95,
    "name": "onix",
    "height": "8.8 m",
    "weight": "210.0 kg",
    "ability": "Rock Head",
    "move": "Rock Slide",
    "egg_group": "Mineral"
  },
  {
    "id": 96,
    "name": "drowzee",
    "height": "1.0 m",
    "weight": "32.4 kg",
    "ability": "Insomnia",
    "move": "Hypnosis",
    "egg_group": "Human-Like"
  },
  {
    "id": 97,
    "name": "hypno",
    "height": "1.6 m",
    "weight": "75.6 kg",
    "ability": "Insomnia",
    "move": "Dream Eater",
    "egg_group": "Human-Like"
  },
  {
    "id": 98,
    "name": "krabby",
    "height": "0.4 m",
    "weight": "6.5 kg",
    "ability": "Hyper Cutter",
    "move": "Bubble",
    "egg_group": "Water 3"
  },
  {
    "id": 99,
    "name": "kingler",
    "height": "1.3 m",
    "weight": "60.0 kg",
    "ability": "Hyper Cutter",
    "move": "Crabhammer",
    "egg_group": "Water 3"
  },
  {
    "id": 100,
    "name": "voltorb",
    "height": "0.5 m",
    "weight": "10.4 kg",
    "ability": "Soundproof",
    "move": "Self-Destruct",
    "egg_group": "Mineral"
  },
  {
    "id": 101,
    "name": "electrode",
    "height": "1.2 m",
    "weight": "66.6 kg",
    "ability": "Soundproof",
    "move": "Explosion",
    "egg_group": "Mineral"
  },
  {
    "id": 102,
    "name": "exeggcute",
    "height": "0.4 m",
    "weight": "2.5 kg",
    "ability": "Chlorophyll",
    "move": "Barrage",
    "egg_group": "Plant"
  },
  {
    "id": 103,
    "name": "exeggutor",
    "height": "2.0 m",
    "weight": "120.0 kg",
    "ability": "Chlorophyll",
    "move": "Psychic",
    "egg_group": "Plant"
  },
  {
    "id": 104,
    "name": "cubone",
    "height": "0.4 m",
    "weight": "6.5 kg",
    "ability": "Rock Head",
    "move": "Bone Club",
    "egg_group": "Monster"
  },
  {
    "id": 105,
    "name": "marowak",
    "height": "1.0 m",
    "weight": "45.0 kg",
    "ability": "Rock Head",
    "move": "Bonemerang",
    "egg_group": "Monster"
  },
  {
    "id": 106,
    "name": "hitmonlee",
    "height": "1.5 m",
    "weight": "49.8 kg",
    "ability": "Limber",
    "move": "Hi Jump Kick",
    "egg_group": "Human-Like"
  },
  {
    "id": 107,
    "name": "hitmonchan",
    "height": "1.4 m",
    "weight": "50.2 kg",
    "ability": "Keen Eye",
    "move": "Fire Punch",
    "egg_group": "Human-Like"
  },
  {
    "id": 108,
    "name": "lickitung",
    "height": "1.2 m",
    "weight": "65.5 kg",
    "ability": "Own Tempo",
    "move": "Lick",
    "egg_group": "Monster"
  },
  {
    "id": 109,
    "name": "koffing",
    "height": "0.6 m",
    "weight": "1.0 kg",
    "ability": "Levitate",
    "move": "Smog",
    "egg_group": "Amorphous"
  },
  {
    "id": 110,
    "name": "weezing",
    "height": "1.2 m",
    "weight": "9.5 kg",
    "ability": "Levitate",
    "move": "Sludge Bomb",
    "egg_group": "Amorphous"
  },
  {
    "id": 111,
    "name": "rhyhorn",
    "height": "1.0 m",
    "weight": "115.0 kg",
    "ability": "Lightning Rod",
    "move": "Horn Attack",
    "egg_group": "Ground, Monster"
  },
  {
    "id": 112,
    "name": "rhydon",
    "height": "1.9 m",
    "weight": "120.0 kg",
    "ability": "Lightning Rod",
    "move": "Earthquake",
    "egg_group": "Ground, Monster"
  },
  {
    "id": 113,
    "name": "chansey",
    "height": "1.1 m",
    "weight": "34.6 kg",
    "ability": "Natural Cure",
    "move": "Soft-Boiled",
    "egg_group": "Fairy"
  },
  {
    "id": 114,
    "name": "tangela",
    "height": "1.0 m",
    "weight": "35.0 kg",
    "ability": "Chlorophyll",
    "move": "Vine Whip",
    "egg_group": "Plant"
  },
  {
    "id": 115,
    "name": "kangaskhan",
    "height": "2.2 m",
    "weight": "80.0 kg",
    "ability": "Early Bird",
    "move": "Mega Punch",
    "egg_group": "Monster"
  },
  {
    "id": 116,
    "name": "horsea",
    "height": "0.4 m",
    "weight": "8.0 kg",
    "ability": "Swift Swim",
    "move": "Water Gun",
    "egg_group": "Dragon, Water 1"
  },
  {
    "id": 117,
    "name": "seadra",
    "height": "1.2 m",
    "weight": "25.0 kg",
    "ability": "Poison Point",
    "move": "Dragon Pulse",
    "egg_group": "Dragon, Water 1"
  },
  {
    "id": 118,
    "name": "goldeen",
    "height": "0.6 m",
    "weight": "15.0 kg",
    "ability": "Swift Swim",
    "move": "Horn Attack",
    "egg_group": "Water 2"
  },
  {
    "id": 119,
    "name": "seaking",
    "height": "1.3 m",
    "weight": "39.0 kg",
    "ability": "Swift Swim",
    "move": "Megahorn",
    "egg_group": "Water 2"
  },
  {
    "id": 120,
    "name": "staryu",
    "height": "0.8 m",
    "weight": "34.5 kg",
    "ability": "Illuminate",
    "move": "Swift",
    "egg_group": "Water 3"
  },
  {
    "id": 121,
    "name": "starmie",
    "height": "1.1 m",
    "weight": "80.0 kg",
    "ability": "Illuminate",
    "move": "Psychic",
    "egg_group": "Water 3"
  },
  {
    "id": 122,
    "name": "mr-mime",
    "height": "1.3 m",
    "weight": "54.5 kg",
    "ability": "Soundproof",
    "move": "Psychic",
    "egg_group": "Human-Like"
  },
  {
    "id": 123,
    "name": "scyther",
    "height": "1.5 m",
    "weight": "56.0 kg",
    "ability": "Swarm",
    "move": "Slash",
    "egg_group": "Bug"
  },
  {
    "id": 124,
    "name": "jynx",
    "height": "1.4 m",
    "weight": "40.6 kg",
    "ability": "Oblivious",
    "move": "Ice Beam",
    "egg_group": "Human-Like"
  },
  {
    "id": 125,
    "name": "electabuzz",
    "height": "1.1 m",
    "weight": "30.0 kg",
    "ability": "Static",
    "move": "Thunder Punch",
    "egg_group": "Human-Like"
  },
  {
    "id": 126,
    "name": "magmar",
    "height": "1.3 m",
    "weight": "44.5 kg",
    "ability": "Flame Body",
    "move": "Fire Punch",
    "egg_group": "Human-Like"
  },
  {
    "id": 127,
    "name": "pinsir",
    "height": "1.5 m",
    "weight": "55.0 kg",
    "ability": "Hyper Cutter",
    "move": "Submission",
    "egg_group": "Bug"
  },
  {
    "id": 128,
    "name": "tauros",
    "height": "1.4 m",
    "weight": "88.4 kg",
    "ability": "Intimidate",
    "move": "Take Down",
    "egg_group": "Ground"
  },
  {
    "id": 129,
    "name": "magikarp",
    "height": "0.9 m",
    "weight": "10.0 kg",
    "ability": "Swift Swim",
    "move": "Splash",
    "egg_group": "Dragon, Water 2"
  },
  {
    "id": 130,
    "name": "gyarados",
    "height": "6.5 m",
    "weight": "235.0 kg",
    "ability": "Intimidate",
    "move": "Hyper Beam",
    "egg_group": "Dragon, Water 2"
  },
  {
    "id": 131,
    "name": "lapras",
    "height": "2.5 m",
    "weight": "220.0 kg",
    "ability": "Water Absorb",
    "move": "Ice Beam",
    "egg_group": "Monster, Water 1"
  },
  {
    "id": 132,
    "name": "ditto",
    "height": "0.3 m",
    "weight": "4.0 kg",
    "ability": "Limber",
    "move": "Transform",
    "egg_group": "Ditto"
  },
  {
    "id": 133,
    "name": "eevee",
    "height": "0.3 m",
    "weight": "6.5 kg",
    "ability": "Run Away",
    "move": "Swift",
    "egg_group": "Ground"
  },
  {
    "id": 134,
    "name": "vaporeon",
    "height": "1.0 m",
    "weight": "29.0 kg",
    "ability": "Water Absorb",
    "move": "Hydro Pump",
    "egg_group": "Ground"
  },
  {
    "id": 135,
    "name": "jolteon",
    "height": "0.8 m",
    "weight": "24.5 kg",
    "ability": "Volt Absorb",
    "move": "Thunder",
    "egg_group": "Ground"
  },
  {
    "id": 136,
    "name": "flareon",
    "height": "0.9 m",
    "weight": "25.0 kg",
    "ability": "Flash Fire",
    "move": "Fire Blast",
    "egg_group": "Ground"
  },
  {
    "id": 137,
    "name": "porygon",
    "height": "0.8 m",
    "weight": "36.5 kg",
    "ability": "Trace",
    "move": "Tri Attack",
    "egg_group": "Mineral"
  },
  {
    "id": 138,
    "name": "omanyte",
    "height": "0.4 m",
    "weight": "7.5 kg",
    "ability": "Swift Swim",
    "move": "Water Gun",
    "egg_group": "Water 1, Water 3"
  },
  {
    "id": 139,
    "name": "omastar",
    "height": "1.0 m",
    "weight": "35.0 kg",
    "ability": "Swift Swim",
    "move": "Hydro Pump",
    "egg_group": "Water 1, Water 3"
  },
  {
    "id": 140,
    "name": "kabuto",
    "height": "0.5 m",
    "weight": "11.5 kg",
    "ability": "Swift Swim",
    "move": "Scratch",
    "egg_group": "Water 1, Water 3"
  },
  {
    "id": 141,
    "name": "kabutops",
    "height": "1.3 m",
    "weight": "40.5 kg",
    "ability": "Swift Swim",
    "move": "Slash",
    "egg_group": "Water 1, Water 3"
  },
  {
    "id": 142,
    "name": "aerodactyl",
    "height": "1.8 m",
    "weight": "59.0 kg",
    "ability": "Rock Head",
    "move": "Wing Attack",
    "egg_group": "Flying"
  },
  {
    "id": 143,
    "name": "snorlax",
    "height": "2.1 m",
    "weight": "460.0 kg",
    "ability": "Immunity",
    "move": "Body Slam",
    "egg_group": "Monster"
  },
  {
    "id": 144,
    "name": "articuno",
    "height": "1.7 m",
    "weight": "55.4 kg",
    "ability": "Pressure",
    "move": "Ice Beam",
    "egg_group": "No Eggs"
  },
  {
    "id": 145,
    "name": "zapdos",
    "height": "1.6 m",
    "weight": "52.6 kg",
    "ability": "Pressure",
    "move": "Thunder",
    "egg_group": "No Eggs"
  },
  {
    "id": 146,
    "name": "moltres",
    "height": "2.0 m",
    "weight": "60.0 kg",
    "ability": "Pressure",
    "move": "Fire Blast",
    "egg_group": "No Eggs"
  },
  {
    "id": 147,
    "name": "dratini",
    "height": "1.8 m",
    "weight": "3.3 kg",
    "ability": "Shed Skin",
    "move": "Dragon Rush",
    "egg_group": "Dragon, Water 1"
  },
  {
    "id": 148,
    "name": "dragonair",
    "height": "4.0 m",
    "weight": "16.5 kg",
    "ability": "Shed Skin",
    "move": "Dragon Pulse",
    "egg_group": "Dragon, Water 1"
  },
  {
    "id": 149,
    "name": "dragonite",
    "height": "2.2 m",
    "weight": "210.0 kg",
    "ability": "Inner Focus",
    "move": "Dragon Claw",
    "egg_group": "Dragon, Water 1"
  },
  {
    "id": 150,
    "name": "mewtwo",
    "height": "2.0 m",
    "weight": "122.0 kg",
    "ability": "Pressure",
    "move": "Psychic",
    "egg_group": "No Eggs"
  },
  {
    "id": 151,
    "name": "mew",
    "height": "0.4 m",
    "weight": "4.0 kg",
    "ability": "Synchronize",
    "move": "Transform",
    "egg_group": "No Eggs"
  }
]
  </script>
  <script>
    // Game state variables
    const pokemonData = JSON.parse(document.getElementById("pokedex-data").textContent.trim());
    let unlocked = {};
    let currentPokemon = null;
    let bonusQuestions = [];
    let bonusIndex = 0;
    let lastRocket = false;
    let currentIsShinyRound = false;
    let currentStreak = 0;
    let totalShinyCount = 0;
    let gameAchievements = {};
    let soundEnabled = true;

    // Sound effects (using data URLs for compatibility)
    const sounds = {
      correct: createBeepSound(800, 0.2),
      wrong: createBeepSound(300, 0.3),
      unlock: createSuccessSound(),
      rocket: createRocketSound(),
      shiny: createShinySound()
    };

    // Utility functions
    function padId(num) { return String(num).padStart(3, "0"); }
    function getSpritePath(id, shiny=false) { 
      const padded = padId(id); 
      return shiny ? `sprites/pokemon_${padded}_shiny.png` : `sprites/pokemon_${padded}.png`; 
    }
    function getSilhouettePath(id) { return `sprites/pokemon_${padId(id)}_silhouette.png`; }
    function shuffle(array) { return array.sort(() => Math.random() - 0.5); }

    // Create simple sound effects using Web Audio API
    function createBeepSound(frequency, duration) {
      return () => {
        if (!soundEnabled) return;
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.value = frequency;
        oscillator.type = 'sine';
        
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + duration);
      };
    }

    function createSuccessSound() {
      return () => {
        if (!soundEnabled) return;
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const frequencies = [523, 659, 784, 1047]; // C, E, G, C
        
        frequencies.forEach((freq, i) => {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = freq;
          oscillator.type = 'sine';
          
          const startTime = audioContext.currentTime + i * 0.1;
          gainNode.gain.setValueAtTime(0.2, startTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.3);
          
          oscillator.start(startTime);
          oscillator.stop(startTime + 0.3);
        });
      };
    }

    function createRocketSound() {
      return () => {
        if (!soundEnabled) return;
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
        oscillator.frequency.linearRampToValueAtTime(100, audioContext.currentTime + 1);
        oscillator.type = 'sawtooth';
        
        gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 1);
      };
    }

    function createShinySound() {
      return () => {
        if (!soundEnabled) return;
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const frequencies = [1047, 1319, 1568, 2093]; // High pitched magical sound
        
        frequencies.forEach((freq, i) => {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = freq;
          oscillator.type = 'sine';
          
          const startTime = audioContext.currentTime + i * 0.05;
          gainNode.gain.setValueAtTime(0.3, startTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.4);
          
          oscillator.start(startTime);
          oscillator.stop(startTime + 0.4);
        });
      };
    }

    // Particle effects
    function createParticles(container, count = 20, color = '#ffd700') {
      for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.background = color;
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 3 + 's';
        particle.style.animationDuration = (2 + Math.random() * 2) + 's';
        container.appendChild(particle);

        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 5000);
      }
    }

    // Achievement system
    function checkAchievements() {
      const unlockedCount = Object.keys(unlocked).length;
      const starterIds = [1, 4, 7]; // Bulbasaur, Charmander, Squirtle
      const hasAllStarters = starterIds.every(id => unlocked[id]);
      
      // First catch achievement
      if (unlockedCount === 1 && !gameAchievements.firstCatch) {
        gameAchievements.firstCatch = true;
        showAchievement("First Steps", "Caught your first Pok√©mon!");
      }
      
      // Starter collection achievement
      if (hasAllStarters && !gameAchievements.starterMaster) {
        gameAchievements.starterMaster = true;
        showAchievement("Starter Master", "Collected all three starter Pok√©mon!");
      }
      
      // Milestone achievements
      const milestones = [10, 25, 50, 100, 151];
      milestones.forEach(milestone => {
        if (unlockedCount >= milestone && !gameAchievements[`milestone_${milestone}`]) {
          gameAchievements[`milestone_${milestone}`] = true;
          showAchievement("Pok√©dex Progress", `Caught ${milestone} Pok√©mon!`);
        }
      });
      
      // Streak achievements
      if (currentStreak >= 5 && !gameAchievements.streak5) {
        gameAchievements.streak5 = true;
        showAchievement("Hot Streak", "5 correct answers in a row!");
      }
      
      if (currentStreak >= 10 && !gameAchievements.streak10) {
        gameAchievements.streak10 = true;
        showAchievement("On Fire!", "10 correct answers in a row!");
      }
      
      // Shiny achievements
      if (totalShinyCount >= 1 && !gameAchievements.firstShiny) {
        gameAchievements.firstShiny = true;
        showAchievement("Shiny Hunter", "Caught your first shiny Pok√©mon!");
      }
      
      if (totalShinyCount >= 5 && !gameAchievements.shinyCollector) {
        gameAchievements.shinyCollector = true;
        showAchievement("Shiny Collector", "Caught 5 shiny Pok√©mon!");
      }
      
      localStorage.setItem("pokemonAchievements", JSON.stringify(gameAchievements));
    }

    function showAchievement(title, description) {
      const popup = document.getElementById('achievement-popup');
      document.getElementById('achievement-text').innerHTML = `<strong>${title}</strong><br>${description}`;
      popup.classList.add('show');
      
      setTimeout(() => {
        popup.classList.remove('show');
      }, 4000);
    }

    // Load saved data
    function loadGameData() {
      unlocked = JSON.parse(localStorage.getItem("unlockedPokemon")) || {};
      currentStreak = parseInt(localStorage.getItem("pokemonStreak")) || 0;
      gameAchievements = JSON.parse(localStorage.getItem("pokemonAchievements")) || {};
      
      // Count shinies
      totalShinyCount = Object.values(unlocked).filter(type => type === "shiny").length;
      
      updateAllCounters();
    }

    function saveGameData() {
      localStorage.setItem("unlockedPokemon", JSON.stringify(unlocked));
      localStorage.setItem("pokemonStreak", currentStreak.toString());
      localStorage.setItem("pokemonAchievements", JSON.stringify(gameAchievements));
    }

    // Update UI counters
    function updateAllCounters() {
      const unlockedCount = Object.keys(unlocked).length;
      document.getElementById("pokedex-counter").textContent = `${unlockedCount} / 151`;
      document.getElementById("pokedex-counter-title").textContent = `(${unlockedCount} / 151)`;
      document.getElementById("streak-counter").textContent = `Streak: ${currentStreak}`;
      document.getElementById("shiny-counter").textContent = `Shinies: ${totalShinyCount}`;

      const achievementsUnlocked = Object.keys(gameAchievements || {}).length;
      const achElem = document.getElementById("achievement-counter");
      if (achElem) {
        achElem.textContent = `Achievements: ${achievementsUnlocked}`;
      }

    }

    // Game logic functions
    function startRound() {
      // Hide loading screen if still visible
      const loadingScreen = document.getElementById('loading-screen');
      if (loadingScreen.style.display !== 'none') {
        loadingScreen.style.opacity = '0';
        setTimeout(() => {
          loadingScreen.style.display = 'none';
        }, 500);
      }

      document.getElementById("rocket-event").style.display = "none";
      document.getElementById("round-screen").style.display = "block";
      document.getElementById("round-screen").classList.remove("quiz-bg");
      document.getElementById("round-screen").classList.add("silhouette-bg");
      document.getElementById("stats-area").style.display = "none";
      document.getElementById("back-button").style.display = "none";
      
      const qAreaReset = document.getElementById("question-area");
      qAreaReset.style.fontSize = "1.4rem";
      qAreaReset.style.lineHeight = "normal";
      qAreaReset.style.whiteSpace = "normal";
      qAreaReset.style.color = "#fff";
      
      document.getElementById("answers-area").style.display = "flex";

      // Team Rocket encounter (10% chance, not twice in a row)
      if (!lastRocket && Math.random() < 0.10) {
        lastRocket = true;
        handleTeamRocket();
        return;
      } else {
        lastRocket = false;
      }

      const lockedList = pokemonData.filter(p => !(p.id in unlocked));
      if (lockedList.length === 0) {
        // Game completed!
        document.getElementById("question-area").textContent = "Congratulations! You've caught them all!";
        showAchievement("Pok√©mon Master", "Completed the entire Pok√©dex!");
        return;
      }

      currentPokemon = lockedList[Math.floor(Math.random() * lockedList.length)];
      const silEl = document.getElementById("silhouette");
      silEl.src = getSilhouettePath(currentPokemon.id);
      silEl.style.imageRendering = "auto";
      
      document.getElementById("question-area").textContent = "Who's that Pok√©mon?";
      
      const otherNames = shuffle(pokemonData.filter(p => p.id !== currentPokemon.id)).slice(0,3).map(p => p.name);
      const options = shuffle([currentPokemon.name, ...otherNames]);
      
      const answersDiv = document.getElementById("answers-area");
      answersDiv.innerHTML = "";
      options.forEach(name => {
        const btn = document.createElement("button");
        btn.textContent = name;
        btn.onclick = () => handleGuess(name);
        answersDiv.appendChild(btn);
      });
    }

    function handleGuess(name) {
      if (name === currentPokemon.name) {
        sounds.correct();
        currentStreak++;
        updateAllCounters();
        document.getElementById("question-area").textContent = "Correct! Bonus Round.";
        startBonusRound();
      } else {
        sounds.wrong();
        currentStreak = 0;
        updateAllCounters();
        document.getElementById("question-area").textContent = "Wrong! New silhouette coming...";
        setTimeout(startRound, 1200);
      }
      saveGameData();
    }

    function handleTeamRocket() {
      sounds.rocket();
      
      const unlockedCount = Object.keys(unlocked).length;
      if (unlockedCount < 5) {
        startRound();
        return;
      }

      document.getElementById("rocket-event").style.display = "block";
      const silEl = document.getElementById("silhouette");
      silEl.src = "sprites/pokemon_000.png";
      silEl.style.imageRendering = "pixelated";
      silEl.style.width = "40%";
      silEl.style.height = "auto";
      silEl.style.transform = "translate(-20px, 130px)";

      document.getElementById("answers-area").style.display = "none";

      const qArea = document.getElementById("question-area");
      const normalKeys = Object.keys(unlocked).filter(id => unlocked[id] === "normal");
      let message;

      if (Math.random() < 0.75 && normalKeys.length > 0) {
        const stealId = parseInt(normalKeys[Math.floor(Math.random() * normalKeys.length)], 10);
        const stolenName = pokemonData.find(p => p.id === stealId).name;
        delete unlocked[stealId];
        totalShinyCount = Object.values(unlocked).filter(type => type === "shiny").length;
        saveGameData();
        updatePokedexUI();
        updateAllCounters();
        message = `Team Rocket stole your ${stolenName}!`;
        
        // Add some particles for the theft
        createParticles(document.getElementById('rocket-particles'), 15, '#ff6b6b');
      } else {
        message = "Team Rocket tried to steal a Pok√©mon, but failed!";
      }

      document.getElementById("rocket-message").textContent = message;

      setTimeout(() => {
        silEl.style.width = "";
        silEl.style.height = "";
        silEl.style.transform = "";
        qArea.style.fontSize = "1.2rem";
        qArea.style.lineHeight = "normal";
        qArea.style.whiteSpace = "normal";
        qArea.style.color = "#fff";
        document.getElementById("answers-area").style.display = "flex";
        startRound();
      }, 4000);
    }

    function startBonusRound() {
      const screen = document.getElementById("round-screen");
      screen.classList.remove("silhouette-bg");
      screen.classList.add("quiz-bg");
      
      // Higher shiny chance for streaks
      let shinyChance = 0.10;
      if (currentStreak >= 5) shinyChance = 0.15;
      if (currentStreak >= 10) shinyChance = 0.25;
      
      currentIsShinyRound = Math.random() < shinyChance;
      
      const silEl = document.getElementById("silhouette");
      silEl.src = getSpritePath(currentPokemon.id, currentIsShinyRound);
      silEl.style.imageRendering = "pixelated";
      
      const stats = ["height","weight","ability","id","egg_group"];
      bonusQuestions = shuffle(stats).slice(0,3);
      bonusIndex = 0;
      askNextBonusQuestion();
    }

    function askNextBonusQuestion() {
      if (bonusIndex >= bonusQuestions.length) {
        unlockPokemon();
        return;
      }

      const stat = bonusQuestions[bonusIndex];
      let questionText = "", correctAnswer = "", pool = [];

      if (stat === "height") {
        questionText = `What is ${currentPokemon.name}'s height?`;
        correctAnswer = currentPokemon.height;
        pool = pokemonData.map(p => p.height);
      } else if (stat === "weight") {
        questionText = `What is ${currentPokemon.name}'s weight?`;
        correctAnswer = currentPokemon.weight;
        pool = pokemonData.map(p => p.weight);
      } else if (stat === "ability") {
        questionText = `What is ${currentPokemon.name}'s ability?`;
        correctAnswer = currentPokemon.ability;
        pool = pokemonData.map(p => p.ability);
      } else if (stat === "id") {
        questionText = `What is ${currentPokemon.name}'s Pok√©dex number?`;
        correctAnswer = String(currentPokemon.id);
        pool = pokemonData.map(p => String(p.id));
      } else if (stat === "egg_group") {
        questionText = `What is ${currentPokemon.name}'s egg group?`;
        correctAnswer = currentPokemon.egg_group;
        pool = pokemonData.map(p => p.egg_group);
      } else if (stat === "move") {
        questionText = `Which move can ${currentPokemon.name} learn?`;
        correctAnswer = currentPokemon.move;
        pool = pokemonData.map(p => p.move).filter(move => move !== correctAnswer);
      }

      pool = Array.from(new Set(pool));

      let formatted = questionText;
      const parts = questionText.split(/\s+/);
      if (parts.length > 3) {
        const segments = [];
        for (let i = 0; i < parts.length; i += 3) {
          segments.push(parts.slice(i, i + 3).join(' '));
        }
        formatted = segments.join('<br>');
      }
      document.getElementById("question-area").innerHTML = formatted;

      const wrongs = shuffle(pool).slice(0, 3);
      const answers = shuffle([correctAnswer, ...wrongs]);

      const answersDiv = document.getElementById("answers-area");
      answersDiv.innerHTML = "";
      answers.forEach(ans => {
        const btn = document.createElement("button");
        btn.textContent = ans;
        btn.onclick = () => handleBonusAnswer(ans, correctAnswer);
        answersDiv.appendChild(btn);
      });
    }

    function handleBonusAnswer(selected, correctAnswer) {
      if (selected === correctAnswer) {
        sounds.correct();
        bonusIndex++;
        askNextBonusQuestion();
      } else {
        sounds.wrong();
        currentStreak = 0;
        updateAllCounters();
        document.getElementById("question-area").textContent = "Wrong! Better luck next time!";
        setTimeout(startRound, 1500);
        saveGameData();
      }
    }

    function unlockPokemon() {
      const isShiny = currentIsShinyRound;
      unlocked[currentPokemon.id] = isShiny ? "shiny" : "normal";
      
      if (isShiny) {
        sounds.shiny();
        totalShinyCount++;
        createParticles(document.getElementById('game-particles'), 30, '#ffd700');
      } else {
        sounds.unlock();
        createParticles(document.getElementById('game-particles'), 15, '#4ecdc4');
      }

      saveGameData();
      updatePokedexUI();
      updateAllCounters();
      checkAchievements();

      document.getElementById("question-area").textContent =
        `Congratulations! You unlocked ${isShiny ? "a shiny" : "a"} ${currentPokemon.name}!`;

      setTimeout(startRound, 2000);
    }

    function updatePokedexUI() {
      const grid = document.getElementById("pokedex-grid");
      grid.innerHTML = "";

      pokemonData.forEach(p => {
        const card = document.createElement("div");
        card.className = "pokemon-card";
        
        if (unlocked[p.id] === "shiny") {
          card.classList.add("shiny-card");
        }
        
        const img = document.createElement("img");
        const label = document.createElement("div");
        label.className = "label";
        
        if (unlocked[p.id]) {
          const shiny = unlocked[p.id] === "shiny";
          img.src = getSpritePath(p.id, shiny);
          label.textContent = shiny ? `${p.name} ‚ú®` : p.name;
        } else {
          img.src = getSilhouettePath(p.id);
          label.textContent = "???";
        }
        
        card.appendChild(img);
        card.appendChild(label);
        
        if (unlocked[p.id]) {
          card.style.cursor = "pointer";
          card.onclick = () => showPokedexEntry(p);
        }
        
        grid.appendChild(card);
      });
    }

    function showPokedexEntry(p) {
      const roundScreen = document.getElementById("round-screen");
      roundScreen.classList.remove("silhouette-bg");
      roundScreen.classList.add("quiz-bg");
      
      const silEl = document.getElementById("silhouette");
      const shiny = unlocked[p.id] === "shiny";
      silEl.src = getSpritePath(p.id, shiny);
      silEl.style.imageRendering = "pixelated";
      
      const qArea = document.getElementById("question-area");
      qArea.innerHTML = `<strong>${p.name.toUpperCase()}</strong>${shiny ? ' ‚ú®' : ''}<br><br>` +
        `<span id="back-link" style="background:#cc0000;color:#fff;padding:0.2rem 0.4rem;border-radius:4px;cursor:pointer;margin-left:1rem;">Back</span>`;
      qArea.style.fontSize = "1.4rem";
      qArea.style.lineHeight = "1.4";
      qArea.style.whiteSpace = "normal";
      
      setTimeout(() => {
        const backLinkEl = document.getElementById('back-link');
        if (backLinkEl) backLinkEl.onclick = () => exitPokedexView();
      }, 0);
      
      const statsArea = document.getElementById("stats-area");
      statsArea.innerHTML =
        `<strong>Height:</strong> ${p.height}<br>` +
        `<strong>Weight:</strong> ${p.weight}<br>` +
        `<strong>Ability:</strong> ${p.ability}<br>` +
        `<strong>Move:</strong> ${p.move}<br>` +
        `<strong>Egg group:</strong> ${p.egg_group}<br>` +
        `<strong>Pok√©dex #:</strong> ${p.id}`;
      statsArea.style.display = "block";
      
      document.getElementById("answers-area").style.display = "none";
      document.getElementById("back-button").style.display = "none";
    }

    function exitPokedexView() {
      document.getElementById("stats-area").style.display = "none";
      document.getElementById("back-button").style.display = "none";
      
      const qArea = document.getElementById("question-area");
      qArea.style.fontSize = "1.4rem";
      qArea.style.lineHeight = "normal";
      qArea.style.whiteSpace = "normal";
      qArea.style.color = "#fff";
      
      startRound();
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      const answers = document.querySelectorAll('.answers-area button');
      if (answers.length > 0) {
        switch(e.key) {
          case '1':
            if (answers[0]) answers[0].click();
            break;
          case '2':
            if (answers[1]) answers[1].click();
            break;
          case '3':
            if (answers[2]) answers[2].click();
            break;
          case '4':
            if (answers[3]) answers[3].click();
            break;
          case 'Escape':
            if (document.getElementById('stats-area').style.display === 'block') {
              exitPokedexView();
            }
            break;
        }
      }
    });

    // Initialize game
    function initGame() {
      // Show loading screen
      document.getElementById('loading-screen').style.display = 'flex';
      
      setTimeout(() => {
        loadGameData();
        updatePokedexUI();
        startRound();
      }, 1500); // Simulate loading time
    }

    // Start the game
    initGame();
  </script>
</body>
</html>
    
